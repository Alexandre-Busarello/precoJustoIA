# CORRE√á√ÉO URGENTE: historical-data-service.ts

## Erro de Sintaxe na Linha 354

### Problema:
Indenta√ß√£o incorreta e falta de fechamento correto do `map()` e `skipDuplicates`.

### Linhas 341-364 (SUBSTITUIR POR):

```typescript
        // Usar createMany que √© mais eficiente que m√∫ltiplos upserts
        await prisma.historicalPrice.createMany({
          data: batch.map(point => ({
            companyId: companyId,
            date: point.date,
            interval: interval,
            open: point.open,
            high: point.high,
            low: point.low,
            close: point.close,
            volume: BigInt(point.volume),
            adjustedClose: point.adjustedClose
          })),
          skipDuplicates: true
        });
        
        processedCount += batch.length;
        if (newData.length > BATCH_SIZE) {
          console.log(`üìä [DB] Processados ${processedCount}/${newData.length} pontos`);
        }
      }

      console.log(`‚úÖ [DB] Salvos ${newData.length} pontos hist√≥ricos no banco`);
```

### Mudan√ßas:
1. Linha 350-352: Remover indenta√ß√£o extra (4 espa√ßos)
2. Linha 353: Trocar `}` por `})),`
3. Linha 354: Adicionar `skipDuplicates: true`
4. Linha 355: Remover `)`
5. Linha 359: Trocar `data.length` por `newData.length`
6. Linha 360: Trocar `data.length` por `newData.length`
7. Linha 364: Trocar `data.length` por `newData.length`

### Como Aplicar:
1. Abra `src/lib/historical-data-service.ts`
2. V√° para a linha 341
3. Selecione at√© a linha 364
4. Cole o c√≥digo acima
5. Salve o arquivo

